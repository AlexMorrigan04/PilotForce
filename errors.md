Existing session detected, restarting heartbeat
sessionManager.ts:66 Auth session heartbeat started
companyData.ts:16 AWS credentials not fully specified in environment variables
overrideMethod @ hook.js:608
./src/utils/companyData.ts @ companyData.ts:16
options.factory @ react refresh:37
__webpack_require__ @ bootstrap:22
fn @ hot module replacement:62
hotRequire @ react refresh:20
./src/components/Dashboard.tsx @ CompanyUsers.tsx:1230
options.factory @ react refresh:37
__webpack_require__ @ bootstrap:22
fn @ hot module replacement:62
hotRequire @ react refresh:20
./src/App.tsx @ index.js:117
options.factory @ react refresh:37
__webpack_require__ @ bootstrap:22
fn @ hot module replacement:62
hotRequire @ react refresh:20
./src/index.js @ index.css:78
options.factory @ react refresh:37
__webpack_require__ @ bootstrap:22
(anonymous) @ startup:7
(anonymous) @ startup:7Understand this warning
emailService.ts:44 Formspree endpoints: {signup: 'https://formspree.io/f/mvgkqjvr', booking: 'https://formspree.io/f/mvgkqjvr'}
hook.js:608 ‚ö†Ô∏è React Router Future Flag Warning: React Router will begin wrapping state updates in `React.startTransition` in v7. You can use the `v7_startTransition` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_starttransition. Error Component Stack
    at BrowserRouter (index.tsx:789:1)
    at AuthProvider (AuthContext.tsx:48:1)
    at App (<anonymous>)
overrideMethod @ hook.js:608
warnOnce @ deprecations.ts:9
logDeprecation @ deprecations.ts:13
logV6DeprecationWarnings @ deprecations.ts:26
(anonymous) @ index.tsx:816
commitHookEffectListMount @ react-dom.development.js:23189
commitPassiveMountOnFiber @ react-dom.development.js:24965
commitPassiveMountEffects_complete @ react-dom.development.js:24930
commitPassiveMountEffects_begin @ react-dom.development.js:24917
commitPassiveMountEffects @ react-dom.development.js:24905
flushPassiveEffectsImpl @ react-dom.development.js:27078
flushPassiveEffects @ react-dom.development.js:27023
(anonymous) @ react-dom.development.js:26808
workLoop @ scheduler.development.js:266
flushWork @ scheduler.development.js:239
performWorkUntilDeadline @ scheduler.development.js:533Understand this warning
hook.js:608 ‚ö†Ô∏è React Router Future Flag Warning: Relative route resolution within Splat routes is changing in v7. You can use the `v7_relativeSplatPath` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath. Error Component Stack
    at BrowserRouter (index.tsx:789:1)
    at AuthProvider (AuthContext.tsx:48:1)
    at App (<anonymous>)
overrideMethod @ hook.js:608
warnOnce @ deprecations.ts:9
logDeprecation @ deprecations.ts:13
logV6DeprecationWarnings @ deprecations.ts:37
(anonymous) @ index.tsx:816
commitHookEffectListMount @ react-dom.development.js:23189
commitPassiveMountOnFiber @ react-dom.development.js:24965
commitPassiveMountEffects_complete @ react-dom.development.js:24930
commitPassiveMountEffects_begin @ react-dom.development.js:24917
commitPassiveMountEffects @ react-dom.development.js:24905
flushPassiveEffectsImpl @ react-dom.development.js:27078
flushPassiveEffects @ react-dom.development.js:27023
(anonymous) @ react-dom.development.js:26808
workLoop @ scheduler.development.js:266
flushWork @ scheduler.development.js:239
performWorkUntilDeadline @ scheduler.development.js:533Understand this warning
AuthContext.tsx:61 üîÑ Initializing auth state...
AuthContext.tsx:68 ‚úÖ Found valid authentication session
adminUtils.ts:34 Token decoded, checking for admin status {hasGroups: false, role: 'CompanyAdmin', email: 'alexhutchings04@gmail.com'}
adminUtils.ts:65 Admin check result: {isAdminGroup: false, isAdminRole: true, finalResult: true}
adminUtils.ts:74 Admin status stored in localStorage
AuthContext.tsx:179 Restored authenticated user from localStorage: {id: '406ca9dc-c041-70f9-ff15-c51fa0c0bb8b', username: 'alex', email: 'alexhutchings04@gmail.com', companyId: '2ae4ff65-867d-4789-84e7-9fa894dd962e', role: 'CompanyAdmin',¬†‚Ä¶}
AuthContext.tsx:61 üîÑ Initializing auth state...
AuthContext.tsx:68 ‚úÖ Found valid authentication session
adminUtils.ts:34 Token decoded, checking for admin status {hasGroups: false, role: 'CompanyAdmin', email: 'alexhutchings04@gmail.com'}
adminUtils.ts:65 Admin check result: {isAdminGroup: false, isAdminRole: true, finalResult: true}
adminUtils.ts:74 Admin status stored in localStorage
AuthContext.tsx:179 Restored authenticated user from localStorage: {id: '406ca9dc-c041-70f9-ff15-c51fa0c0bb8b', username: 'alex', email: 'alexhutchings04@gmail.com', companyId: '2ae4ff65-867d-4789-84e7-9fa894dd962e', role: 'CompanyAdmin',¬†‚Ä¶}
2AuthContext.tsx:74 Admin status: Administrator
tokenDebugger.ts:112 ====== AUTH STATE DEBUG ======
tokenDebugger.ts:115 Token exists: true
tokenDebugger.ts:116 Refresh token exists: true
tokenDebugger.ts:121 Token valid: true
tokenDebugger.ts:124 Token expired: false
tokenDebugger.ts:125 Token issuer: https://cognito-idp.eu-north-1.amazonaws.com/eu-north-1_gejWyB4ZB
tokenDebugger.ts:126 Token subject: 406ca9dc-c041-70f9-ff15-c51fa0c0bb8b
tokenDebugger.ts:129 Token expires at: 2025-04-20T14:16:27.000Z
tokenDebugger.ts:133 Minutes until token expires: 56
tokenDebugger.ts:141 User data exists: true
tokenDebugger.ts:143 ====== END AUTH DEBUG ======
adminUtils.ts:34 Token decoded, checking for admin status {hasGroups: false, role: 'CompanyAdmin', email: 'alexhutchings04@gmail.com'}
adminUtils.ts:65 Admin check result: {isAdminGroup: false, isAdminRole: true, finalResult: true}
adminUtils.ts:74 Admin status stored in localStorage
tokenDebugger.ts:112 ====== AUTH STATE DEBUG ======
tokenDebugger.ts:115 Token exists: true
tokenDebugger.ts:116 Refresh token exists: true
tokenDebugger.ts:121 Token valid: true
tokenDebugger.ts:124 Token expired: false
tokenDebugger.ts:125 Token issuer: https://cognito-idp.eu-north-1.amazonaws.com/eu-north-1_gejWyB4ZB
tokenDebugger.ts:126 Token subject: 406ca9dc-c041-70f9-ff15-c51fa0c0bb8b
tokenDebugger.ts:129 Token expires at: 2025-04-20T14:16:27.000Z
tokenDebugger.ts:133 Minutes until token expires: 56
tokenDebugger.ts:141 User data exists: true
tokenDebugger.ts:143 ====== END AUTH DEBUG ======
AuthContext.tsx:431 User confirmed as administrator
App.tsx:71 Admin group check result: {groups: Array(0), isAdmin: false}
App.tsx:82 User is not in Administrators group, clearing any incorrect admin flags
CompanyUsers.tsx:58 Stored username for auth in localStorage
companyUtils.ts:25 Extracted companyId from token: 2ae4ff65-867d-4789-84e7-9fa894dd962e
Dashboard.tsx:247 Fetching users for company ID: 2ae4ff65-867d-4789-84e7-9fa894dd962e
companyData.ts:194 Fetching users for company: 2ae4ff65-867d-4789-84e7-9fa894dd962e
companyData.ts:216 Auth credentials available: username=true, password=true, token=true
companyData.ts:227 Using token authentication for company users fetch
companyData.ts:242 Making GET request to fetch company users
CompanyUsers.tsx:58 Stored username for auth in localStorage
companyUtils.ts:25 Extracted companyId from token: 2ae4ff65-867d-4789-84e7-9fa894dd962e
Dashboard.tsx:247 Fetching users for company ID: 2ae4ff65-867d-4789-84e7-9fa894dd962e
companyData.ts:194 Fetching users for company: 2ae4ff65-867d-4789-84e7-9fa894dd962e
companyData.ts:216 Auth credentials available: username=true, password=true, token=true
companyData.ts:227 Using token authentication for company users fetch
companyData.ts:242 Making GET request to fetch company users
companyData.ts:280 Response status: 200
companyData.ts:289 Response text length: 886
companyData.ts:295 Parsed response data type: object
companyData.ts:296 Response data keys: companyId, users, count
companyData.ts:307 Found users array directly in response (count: 2)
companyData.ts:358 Final valid users array length: 2 (filtered from 2)
Dashboard.tsx:250 Successfully fetched 2 company users
companyUtils.ts:25 Extracted companyId from token: 2ae4ff65-867d-4789-84e7-9fa894dd962e
CompanyUsers.tsx:82 All users before filtering: (2)¬†[{‚Ä¶}, {‚Ä¶}]
CompanyUsers.tsx:90 Filtered users for company: (2)¬†[{‚Ä¶}, {‚Ä¶}]
CompanyUsers.tsx:105 Regular users found: [{‚Ä¶}]
CompanyUsers.tsx:106 Pending users found: [{‚Ä¶}]
companyData.ts:280 Response status: 200
companyData.ts:289 Response text length: 886
companyData.ts:295 Parsed response data type: object
companyData.ts:296 Response data keys: companyId, users, count
companyData.ts:307 Found users array directly in response (count: 2)
companyData.ts:358 Final valid users array length: 2 (filtered from 2)
Dashboard.tsx:250 Successfully fetched 2 company users
companyUtils.ts:25 Extracted companyId from token: 2ae4ff65-867d-4789-84e7-9fa894dd962e
CompanyUsers.tsx:82 All users before filtering: (2)¬†[{‚Ä¶}, {‚Ä¶}]
CompanyUsers.tsx:90 Filtered users for company: (2)¬†[{‚Ä¶}, {‚Ä¶}]
CompanyUsers.tsx:105 Regular users found: [{‚Ä¶}]
CompanyUsers.tsx:106 Pending users found: [{‚Ä¶}]
CompanyUsers.tsx:243 Making PUT request to: https://4m3m7j8611.execute-api.eu-north-1.amazonaws.com/prod/companies/2ae4ff65-867d-4789-84e7-9fa894dd962e/users/90cc19ec-f041-7060-6272-11ac14261780
CompanyUsers.tsx:299 Using BASIC authentication for PUT operation (this should work based on Lambda logs)
CompanyUsers.tsx:300 Auth credentials: username=al*** (4 chars)
CompanyUsers.tsx:304 Basic auth header generated (26 chars)
CompanyUsers.tsx:306 
            
            
           PUT https://4m3m7j8611.execute-api.eu-north-1.amazonaws.com/prod/companies/2ae4ff65-867d-4789-84e7-9fa894dd962e/users/90cc19ec-f041-7060-6272-11ac14261780 500 (Internal Server Error)
handleApproveUser @ CompanyUsers.tsx:306
onClick @ CompanyUsers.tsx:1065
callCallback @ react-dom.development.js:4164
invokeGuardedCallbackDev @ react-dom.development.js:4213
invokeGuardedCallback @ react-dom.development.js:4277
invokeGuardedCallbackAndCatchFirstError @ react-dom.development.js:4291
executeDispatch @ react-dom.development.js:9041
processDispatchQueueItemsInOrder @ react-dom.development.js:9073
processDispatchQueue @ react-dom.development.js:9086
dispatchEventsForPlugins @ react-dom.development.js:9097
(anonymous) @ react-dom.development.js:9288
batchedUpdates$1 @ react-dom.development.js:26179
batchedUpdates @ react-dom.development.js:3991
dispatchEventForPluginEventSystem @ react-dom.development.js:9287
dispatchEventWithEnableCapturePhaseSelectiveHydrationWithoutDiscreteEventReplay @ react-dom.development.js:6465
dispatchEvent @ react-dom.development.js:6457
dispatchDiscreteEvent @ react-dom.development.js:6430Understand this error
CompanyUsers.tsx:318 Response status from basic auth: 500
CompanyUsers.tsx:322 API error with basic auth: 500 {"message": "Internal server error", "error": "An error occurred (InvalidParameterException) when calling the GetUser operation: 1 validation error detected: Value at 'accessToken' failed to satisfy constraint: Member must satisfy regular expression pattern: [A-Za-z0-9-_=.]+"}
overrideMethod @ hook.js:608
handleApproveUser @ CompanyUsers.tsx:322
await in handleApproveUser
onClick @ CompanyUsers.tsx:1065
callCallback @ react-dom.development.js:4164
invokeGuardedCallbackDev @ react-dom.development.js:4213
invokeGuardedCallback @ react-dom.development.js:4277
invokeGuardedCallbackAndCatchFirstError @ react-dom.development.js:4291
executeDispatch @ react-dom.development.js:9041
processDispatchQueueItemsInOrder @ react-dom.development.js:9073
processDispatchQueue @ react-dom.development.js:9086
dispatchEventsForPlugins @ react-dom.development.js:9097
(anonymous) @ react-dom.development.js:9288
batchedUpdates$1 @ react-dom.development.js:26179
batchedUpdates @ react-dom.development.js:3991
dispatchEventForPluginEventSystem @ react-dom.development.js:9287
dispatchEventWithEnableCapturePhaseSelectiveHydrationWithoutDiscreteEventReplay @ react-dom.development.js:6465
dispatchEvent @ react-dom.development.js:6457
dispatchDiscreteEvent @ react-dom.development.js:6430Understand this error
CompanyUsers.tsx:329 Basic authentication failed: Error: API error: 500 
    at handleApproveUser (CompanyUsers.tsx:323:1)
overrideMethod @ hook.js:608
handleApproveUser @ CompanyUsers.tsx:329
await in handleApproveUser
onClick @ CompanyUsers.tsx:1065
callCallback @ react-dom.development.js:4164
invokeGuardedCallbackDev @ react-dom.development.js:4213
invokeGuardedCallback @ react-dom.development.js:4277
invokeGuardedCallbackAndCatchFirstError @ react-dom.development.js:4291
executeDispatch @ react-dom.development.js:9041
processDispatchQueueItemsInOrder @ react-dom.development.js:9073
processDispatchQueue @ react-dom.development.js:9086
dispatchEventsForPlugins @ react-dom.development.js:9097
(anonymous) @ react-dom.development.js:9288
batchedUpdates$1 @ react-dom.development.js:26179
batchedUpdates @ react-dom.development.js:3991
dispatchEventForPluginEventSystem @ react-dom.development.js:9287
dispatchEventWithEnableCapturePhaseSelectiveHydrationWithoutDiscreteEventReplay @ react-dom.development.js:6465
dispatchEvent @ react-dom.development.js:6457
dispatchDiscreteEvent @ react-dom.development.js:6430Understand this error
CompanyUsers.tsx:348 Error approving user: Error: API error: 500 
    at handleApproveUser (CompanyUsers.tsx:323:1)